
Rspec - фреймворк для тестирования приложений

gem install rspec

Запуск тестов:

rspec

В Rspec существует 2 слова:

    describe
    it

Создадим и протестируем героя компьютерной игры.

Создадим файл hero.rb

class Hero

  def initialize(name, health=100)
    @name = name.capitalize
    @health = health
  end

  attr_reader :name

  def power_up
    @health += 10
  end

  def power_down
    @health -= 10
  end

  def hero_info
    "#{@name} has #{@health} health"
  end

end

Создадим файл hero_spec.rb:

require './hero'

describe Hero do

  it "has a capitalized name" do
    hero = Hero.new 'foo'

    expect(hero.name).to eq 'Foo'
  end

  it "can power up" do
    hero = Hero.new 'foo'

    expect(hero.power_up).to eq 110
  end

end

И, запустим тест:

rspec hero_spec.rb

Написание тестов в большом приложении - это вклад в будущее, защита приложения от ошибок.

Продолжим рассматривать Rspec и тестирование.

Добавим к нашим тестам в файле hero_spec.rb

  it "can power down" do
    hero = Hero.new 'foo'

    expect(hero.power_down).to eq 90
  end

  it "displays full hero info" do
    hero = Hero.new 'foo'

    expect(hero.hero_info).to eq "Foo has 100 health"
  end


rspec hero_spec.rb --color(цветной вывод) запуск теста 